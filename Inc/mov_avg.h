/** ************************************************************************
 * @file
 * @copyright DAKO-CZ, a.s.
 * @copyright Mechatronics
 * @copyright Josefa Daòka 1956
 * @copyright 538 43 Tøemošnice, Czech Republic
 *
 * $HeadURL$
 * $Revision$    01.00
 * $Date$        11.11.2019
 * $Author$      V.Stritesky
 *
 * @addtogroup  mov_avg
 * @{
 *
 * ************************************************************************* */

#ifndef MOV_AVG_H_INCLUDED
#define MOV_AVG_H_INCLUDED

/* =========================================================================
 *                    GLOBAL PART OF THE HEADER FILE
 * ========================================================================= */

#include <stdint.h>         /* for 'int8_t'... */

/* =========================================================================
 *                           Global constant
 * ========================================================================= */

/* =========================================================================
 *                            Global data types
 * ========================================================================= */
typedef struct
{
    uint32_t* buffer;
    uint32_t buf_len;
    uint32_t last_index;
    uint32_t sum;
    uint32_t init_index;
    uint32_t average;
} s_MOV_AVG_32;

/* =========================================================================
 *                               Externals
 * ========================================================================= */

/* =========================================================================
 *                        Global function prototypes
 * ========================================================================= */
void xv_mov_avg_init(s_MOV_AVG_32* avg_struct, uint32_t* buffer, uint32_t buf_len);
void xv_mov_avg_init_val(s_MOV_AVG_32* avg_struct, uint32_t* buffer, uint32_t buf_len, uint32_t init_val);
uint32_t xu32_mov_avg_add(s_MOV_AVG_32* avg_struct, uint32_t new_value);
uint32_t xu32_mov_avg_get_avg(s_MOV_AVG_32* avg_struct);

/* =========================================================================
 *                       LOCAL PART OF THE HEADER FILE
 * ========================================================================= */

/** @cond */
#ifdef __MOV_AVG_INTERNAL_H__
/** @endcond */

/* =========================================================================
 *                             Local constants
 * ========================================================================= */

/* =========================================================================
 *                             Local data types
 * ========================================================================= */

/* =========================================================================
 *                         Local function prototypes
 * ========================================================================= */

/* =========================================================================
 *                      Local interrupt handlers prototypes
 * ========================================================================= */

/** @cond */
#endif /* __MOV_AVG_INTERNAL_H__ */
/** @endcond */

#endif /* MOV_AVG_H_INCLUDED */

/** @} */
